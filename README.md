# Сервис автоматической архивации и отправки файлов на указанные email-адреса
Данный проект спроектирован и реализован для запуска на базе, например, интегарционной шины Red Hat JBoss Fuse, и реализует функционал обработки разного типа файлов (например, отчетов каких-то компаний). Реализованы функции обработки указанных директорий по таймеру за заданную дату, а также, по REST-запросу за дату или период дат. Конфигурационная информация, участвующая в работе сервиса, хранится в конфигурационном файле на сервере.

*tech stack:* `Java` `Apache Maven` `Apache Camel` `Spring` `REST API`

## REST-сервис

Сервис расположен по адресу `http://<host>:<port>/rest/sendarchives`

### Обработка периода дат
Вызов происходит по адресу `http://<host>:<port>/rest/sendarchives/processDate`

Пример запроса:
```json
{
  "code" : "1",
  "date" : "2022-10-09",
  "endDate" : "2022-10-10"
}
```
где *code* - код (компании), по которому необходимо обработать даты
- *в случае, когда необходима одна дата, а не период, endDate не указывается*

Пример ответа:
```json
{
  "status" : "OK"
}
```
если все отработало корректно

### Хранение информации о страховых компаниях

Список компаний хранится в конфигурационном файле в JSON-формате:
```code
info.list=[{'name':'Компания1'\
            ,'code':'1'\
            ,'password':'pass_word1'\
            ,'emailList':['address1@dest.ru','address2@dest.ru']\
            ,'emailListCopy':['address3@dest.ru']\
            ,'emailListError':['address4@dest.ru']\
        }\
            ,{'name':'Компания2'\
            ,'code':'2'\
            ,'password':'pass_word2'\
            ,'emailList':['address5@dest.ru']\
            ,'emailListCopy':['address6@dest.ru']\
            ,'emailListError':['address7@dest.ru']\
        }\
]
```
- *name* - Имя компании, должно соответствовать имени, указанному в обрабатываемых отчетах, т.к. по нему происходит поиск
- *code* - Уникальный идентификатор (код) компании, по которому происходит REST-запрос 
- *password* - Пароль, с которым архивируются файлы
- *emailList* - Список основных получателей писем
- *emailListCopy* - Список получателей копии письма
- *emailListError* - Список получателей письма об ошибках